!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Glitcher=e()}(this,function(){"use strict";function t(t,e){return t+Math.random()*e}function e(t){return Math.floor(Math.random()*t)}function n(t){return t[e(t.length)]}function i(t,e,n){return t.substr(0,e)+n+t.substr(e+1,t.length)}var r=(function(){function t(t){this.value=t}function e(e){function n(t,e){return new Promise(function(n,r){var a={key:t,arg:e,resolve:n,reject:r,next:null};s?s=s.next=a:(o=s=a,i(t,e))})}function i(n,o){try{var s=e[n](o),a=s.value;a instanceof t?Promise.resolve(a.value).then(function(t){i("next",t)},function(t){i("throw",t)}):r(s.done?"return":"normal",s.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":o.resolve({value:e,done:!0});break;case"throw":o.reject(e);break;default:o.resolve({value:e,done:!1})}o=o.next,o?i(o.key,o.arg):s=null}var o,s;this._invoke=n,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},a="@#><}@{}()@-_*&%@!~abcdefghijkhlmnopqrstjk",u=function(){function s(t,e){var n=e.unstableDelta,i=void 0===n?140:n,o=e.stableDelta,a=void 0===o?1100:o,u=e.steps,h=void 0===u?6:u,l=e.charCount,c=void 0===l?4:l;r(this,s),this.$el=t,this.originalText=this.$el.textContent,this.animationId=null,this.lastUpdate=0,this.stableDelta=a,this.unstableDelta=i,this.threshold=i,this.steps=h,this.currentStep=h,this.charCount=c,this.start=this.start.bind(this),this.stop=this.stop.bind(this)}return o(s,[{key:"stop",value:function(){cancelAnimationFrame(this.animationId),this.$el.textContent=this.originalText}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=void 0;this.animationId=requestAnimationFrame(this.start),this.lastTime=this.lastTime?this.lastTime:t,e=t-this.lastTime,e>this.threshold&&(this.lastTime=t,this._tick())}},{key:"_tick",value:function(){this.threshold=t(this.unstableDelta,20),this.currentStep--?this._update():this._reset()}},{key:"_update",value:function(){for(var r=t(this.charCount,-2),o=this.originalText,s=0,u=0;s<r;)u=e(this.originalText.length),/\s/.test(o[u])||(s++,o=i(o,u,n(a)));this.$el.textContent=o}},{key:"_reset",value:function(){this.$el.textContent=this.originalText,this.threshold=t(this.stableDelta,200),this.currentStep=Math.round(t(this.steps,3))}}]),s}(),h={glitch:function(t){var e=t.el,n=s(t,["el"]);return new u(e,n)}};return h});
